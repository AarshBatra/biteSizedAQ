% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sat.derived.data.helper.R
\name{process_uncaptured_uids}
\alias{process_uncaptured_uids}
\title{Process Uncaptured UIDs with Raster Resampling and Population-Weighted Pollution Calculation}
\usage{
process_uncaptured_uids(
  uids_not_captured,
  unit_pol_raster,
  unit_pop_raster,
  ref_shp_file_to_be_rasterized,
  resample_to_res = 0.001,
  res_resample_from = 0.00833333
)
}
\arguments{
\item{uids_not_captured}{A numeric vector of `uid_for_rasterization` values corresponding to
regions that were not included in the initial processing.}

\item{unit_pol_raster}{A `RasterLayer` containing unit-level PM2.5 (or other pollutant) values.}

\item{unit_pop_raster}{A `RasterLayer` with unit-level population values at a coarser resolution.}

\item{ref_shp_file_to_be_rasterized}{A `sf` object representing the reference shapefile with a
column named `uid_for_rasterization` used for filtering and rasterization.}

\item{resample_to_res}{A numeric value specifying the target resolution (in degrees) to which
rasters are resampled. Defaults to `0.001`.}

\item{res_resample_from}{A numeric value indicating the original resolution (in degrees) of the
population raster. Defaults to `0.00833333` (approx. 1km).}
}
\value{
A data frame summarizing the population-weighted pollution for each UID, with the following columns:
\describe{
  \item{sh_rast}{UID of the processed shapefile region.}
  \item{total_population}{Total resampled population in the region.}
  \item{avg_pm2.5_pollution}{Population-weighted average PM2.5 value.}
}
}
\description{
This function handles administrative units (UIDs) that were missed in the original
population-weighted pollution aggregation. It rasterizes shapefile regions for these UIDs,
resamples pollution and population rasters to a finer resolution, and computes
population-weighted average PM2.5 values.
}
\details{
For each UID, the function performs:
\itemize{
  \item Filtering the shapefile to the UID.
  \item Rasterizing the filtered polygon.
  \item Cropping, resampling, and masking the pollution and population rasters to match the polygon.
  \item Adjusting population raster values to represent densities before resampling.
  \item Creating a raster stack and converting to a data frame.
  \item Computing population weights and weighted pollution.
  \item Aggregating to produce population-weighted pollution summaries.
}

This is useful for recovering and summarizing air quality data for regions initially excluded
due to raster alignment or small size.
}
